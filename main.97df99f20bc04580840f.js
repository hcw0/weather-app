(()=>{"use strict";const e={dateObject:document.querySelector(".date"),timeObject:document.querySelector(".current-time"),metric:document.querySelector("#metric"),imperial:document.querySelector("#imperial"),metricLabel:document.querySelector(".metric"),imperialLabel:document.querySelector(".imperial"),searchBar:document.querySelector(".search-bar"),searchBox:document.querySelector(".search-box"),magnifyingGlass:document.querySelector(".fa-magnifying-glass"),cityElement:document.querySelector(".city-element"),currentTemperature:document.querySelector(".current-temperature"),currentWeatherType:document.querySelector(".current-weather-type"),currentFeelsLike:document.querySelector(".current-feels-like"),currentHumidity:document.querySelector(".current-humidity"),currentPressure:document.querySelector(".current-pressure"),currentWindSpeed:document.querySelector(".current-wind-speed"),mainImage:document.querySelector(".main-image"),forecastDayElements:document.querySelectorAll(".day"),forecastMaxTempElements:document.querySelectorAll(".max-temp"),forecastMinTempElements:document.querySelectorAll(".min-temp"),forecastIcons:document.querySelectorAll(".forecast-icon"),currentLatitude:40.7831,currentLongitude:-73.9712};function t(e){switch(e){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday"}}const r=async(r,o,n)=>{try{const c={degrees:"metric"==n?"C":"F",humidity:"%",pressure:"metric"==n?"hPa":"psi",speed:"metric"==n?"m/s":"mph"},s=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${r}&lon=${o}&exclude=hourly,minutely,alerts&appid=9e4b95876253dc331b1210331c2fd5d7&units=${n}`,{mode:"cors"}),i=await s.json();console.log(i);const u="metric"==n?i.current.pressure:(.0145038*i.current.pressure).toFixed(1),l=Math.trunc(i.current.temp);let m=i.current.weather[0].main;"clear"==m.toString().toLowerCase()&&("metric"==n&&l>28||"imperial"==n&&l>82)&&(console.log(m),m="Sunny"),e.currentTemperature.textContent=Math.trunc(i.current.temp).toString()+"째"+c.degrees,e.currentWeatherType.textContent="[ "+m.toString()+" ]",e.currentFeelsLike.textContent=Math.round(i.current.feels_like).toString()+"째"+c.degrees,e.currentHumidity.textContent=i.current.humidity.toString()+c.humidity,e.currentPressure.textContent=u.toString()+" "+c.pressure,e.currentWindSpeed.textContent=i.current.wind_speed.toFixed(1).toString()+" "+c.speed,"thunderstorm"==m.toString().toLowerCase()?e.mainImage.src="./images/Storm.gif":"drizzle"==m.toString().toLowerCase()||"rain"==m.toString().toLowerCase()?e.mainImage.src="./images/Rain.gif":"snow"==m.toString().toLowerCase()?e.mainImage.src="./images/Snow.gif":"clear"==m.toString().toLowerCase()?e.mainImage.src="./images/Clear.gif":"sunny"==m.toString().toLowerCase()?e.mainImage.src="./images/Sunny.gif":"clouds"==m.toString().toLowerCase()?e.mainImage.src="./images/Cloudy.gif":"tornado"==m.toString().toLowerCase()?e.mainImage.src="./images/Tornado.gif":e.mainImage.src="./images/Default.gif";const d=i.current.dt,g=i.timezone_offset;((r,o)=>{let n=new Date(1e3*(r+o)),a=t(n.getUTCDay());const c=n.getUTCHours()>=12?"PM":"AM";e.dateObject.textContent=a+", "+(n.getUTCMonth()+1)+"/"+n.getUTCDate()+"/"+n.getUTCFullYear(),e.timeObject.textContent=n.getUTCHours().toString().padStart(2,"0")+":"+n.getUTCMinutes().toString().padStart(2,"0")+" "+c})(d,g);let y=0,p=new Date(1e3*(d+g)).getDay();console.log(p);for(let r=1;r<7;r++){let o=(p+r)%7,n=t(o);console.log(o);let s="thunderstorm"==(a=i.daily[r].weather[0].main.toString()).toString().toLowerCase()?"fa-cloud-bolt":"drizzle"==a.toString().toLowerCase()||"rain"==a.toString().toLowerCase()?"fa-cloud-rain":"snow"==a.toString().toLowerCase()?"fa-snowflake":"clear"==a.toString().toLowerCase()||"sunny"==a.toString().toLowerCase()?"fa-sun":"clouds"==a.toString().toLowerCase()?"fa-cloud":"tornado"==a.toString().toLowerCase()?"fa-tornado":"fa-smog";e.forecastDayElements[y].textContent=n,e.forecastMaxTempElements[y].textContent=Math.trunc(i.daily[r].temp.max).toString()+"째"+c.degrees,e.forecastMinTempElements[y].textContent=Math.trunc(i.daily[r].temp.min).toString()+"째"+c.degrees,e.forecastIcons[y].className="",e.forecastIcons[y].classList.add("fa-solid","fa-2x","forecast-icon",s),y++}e.searchBox.value="",e.searchBox.blur(),e.cityElement.focus()}catch(e){console.log(e)}var a};document.activeElement.blur(),e.searchBar.addEventListener("mouseover",(()=>{e.searchBox.focus()})),e.searchBar.addEventListener("keydown",(e=>{if(13==e.keyCode)return e.preventDefault(),document.querySelector(".pac-container").style.removeProperty("display"),!1})),e.searchBox.addEventListener("input",(()=>{e.searchBar.classList.add("search-bar-hover"),e.searchBox.classList.add("search-box-hover"),e.magnifyingGlass.classList.add("fa-magnifying-glass-hover")})),e.searchBox.addEventListener("focusout",(()=>{e.searchBar.classList.remove("search-bar-hover"),e.searchBox.classList.remove("search-box-hover"),e.magnifyingGlass.classList.remove("fa-magnifying-glass-hover"),document.querySelector(".pac-container").style.display="none",e.searchBox.value=""})),function(){let t=document.createElement("script");t.setAttribute("defer",""),t.setAttribute("async",""),t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB0s970PqYGaxnHPxFOZYzeJ2RMUB2Pej0&libraries=places&callback=initMap",window.initMap=function(){let t=document.getElementById("search-bar");let o=new google.maps.places.Autocomplete(t);o.addListener("place_changed",(()=>{const t=o.getPlace();if(!t.geometry||!t.geometry.location)return;const n=t.geometry.location.lat(),a=t.geometry.location.lng();!function(t,r,o){document.querySelector(".pac-container").style.display="none";let n=new google.maps.Geocoder;const a={lat:parseFloat(t),lng:parseFloat(r)};n.geocode({location:a},(function(t,r){if(r!==google.maps.GeocoderStatus.OK&&alert(r),r==google.maps.GeocoderStatus.OK){let[r,n,a]=["","",""];t[0].address_components.forEach((e=>{e.types.forEach((t=>{"sublocality"==t.toLowerCase()?r=e.long_name.toString():"locality"==t.toLowerCase()?n=e.long_name.toString():"country"==t.toLowerCase()&&(a=e.long_name.toString())}))})),e.cityElement.textContent=""!=r&&""!=a?`${r}, ${a}`:""!=n&&""!=a?`${n}, ${a}`:""!=a?`${a}`:`${o}`}}))}(n,a,t.formatted_address.toString());let c=e.metric.checked?"metric":"imperial";r(n,a,c),e.currentLatitude=n,e.currentLongitude=a}))},document.getElementsByTagName("head")[0].appendChild(t)}(),r("40.7830603","-73.9712488","metric"),e.metricLabel.addEventListener("click",(()=>{r(e.currentLatitude,e.currentLongitude,"metric")})),e.imperialLabel.addEventListener("click",(()=>{r(e.currentLatitude,e.currentLongitude,"imperial")})),e.cityElement.textContent="Manhattan, United States"})();